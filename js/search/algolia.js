window.addEventListener("load",()=>{var t=GLOBAL_CONFIG.algolia;let{appId:e,apiKey:i,indexName:r,hitsPerPage:o=5,languages:a}=t;if(!e||!i||!r)return console.error("Algolia setting is invalid!");let n=document.getElementById("search-mask"),s=document.querySelector("#algolia-search .search-dialog"),l=t=>{var e=t?"animateIn":"animateOut",i=t?"to_show 0.5s":"to_hide 0.5s",t=t?"titleScale 0.5s":"search_close .5s";btf[e](n,i),btf[e](s,t)},g=()=>{window.innerWidth<768&&s.style.setProperty("--search-height",window.innerHeight+"px")},c=()=>{btf.overflowPaddingR.add(),l(!0),y(!1),setTimeout(()=>{var t=document.querySelector("#algolia-search-input .ais-SearchBox-input");t&&t.focus()},100);let e=t=>{"Escape"===t.code&&(d(),document.removeEventListener("keydown",e))};document.addEventListener("keydown",e),g(),window.addEventListener("resize",g)},d=()=>{btf.overflowPaddingR.remove(),l(!1),window.removeEventListener("resize",g)},p=()=>{btf.addEventListenerPjax(document.querySelector("#search-button > .search"),"click",c)};let h=t=>{if(!t)return"";let e="";if("string"==typeof t)e=t.trim();else if("object"==typeof t)if(void 0!==t.value){if(!(e=String(t.value).trim()))return""}else{if(t.matchedWords||t.matchLevel||void 0!==t.fullyHighlighted)return"";try{if("{}"===(e=JSON.stringify(t).trim())||"[]"===e||'""'===e)return""}catch(t){return""}}else{if(!t.toString||"function"!=typeof t.toString)return"";if("[object Object]"===(e=t.toString().trim())||"[object Array]"===e)return""}t=e.indexOf("<mark>");let i=t-30,a=t+120,n="",s="",l=(i<=0?(i=0,a=140):n="...",a>e.length?a=e.length:s="...",e.substring(i,a));var t=l.indexOf(">"),r=l.indexOf("<"),r=(l=-1!==t&&(-1===r||t<r)?l.substring(t+1):l).lastIndexOf("<"),t=l.lastIndexOf(">"),o=(-1!==r&&t<r&&(l=l.substring(0,r)),[]);let g="",c=0;for(;c<l.length;){if("<"===l[c])if("/"===l[c+1]){var d=l.indexOf(">",c);if(-1!==d){var p=l.substring(c+2,d);for(let t=o.length-1;0<=t;t--)if(o[t]===p){o.splice(t,1);break}g+=l.substring(c,d+1),c=d+1;continue}}else if("<!"===l.substr(c,2)||-1!==l.indexOf("/>",c)&&l.indexOf("/>",c)<l.indexOf(">",c)){d=l.indexOf(">",c);if(-1!==d){g+=l.substring(c,d+1),c=d+1;continue}}else{var h=l.indexOf(">",c);if(-1!==h){var u=l.substring(c+1,-1<l.indexOf(" ",c)&&l.indexOf(" ",c)<h?l.indexOf(" ",c):h).split(/\s/)[0];o.push(u),g+=l.substring(c,h+1),c=h+1;continue}}g+=l[c],c++}for(;0<o.length;){var f=o.pop();g+=`</${f}>`}return(0<i||n)&&(t=e.indexOf("<",0<i?i-30:0),r=e.indexOf("<mark>",0<i?i-30:0),-1!==t)&&(-1===r||t<r)&&(n="..."),l=g,""+n+l+s},u=t=>t?"string"==typeof t?t.trim():"object"==typeof t&&void 0!==t.value?String(t.value).trim():"":"",f;if(window["algoliasearch/lite"]&&"function"==typeof window["algoliasearch/lite"].liteClient)f=window["algoliasearch/lite"].liteClient(e,i);else{if("function"!=typeof window.algoliasearch)return console.error("Algolia search client not found!");f=window.algoliasearch(e,i)}if(!f)return console.error("Failed to initialize Algolia search client");let m="",y=t=>{var e=document.getElementById("loading-status");e&&(e.hidden=!t)},v={get searchInput(){return document.querySelector("#algolia-search-input .ais-SearchBox-input")},get hits(){return document.getElementById("algolia-hits")},get hitsEmpty(){return document.getElementById("algolia-hits-empty")},get hitsList(){return document.querySelector("#algolia-hits .ais-Hits-list")},get hitsWrapper(){return document.querySelector("#algolia-hits .ais-Hits")},get pagination(){return document.getElementById("algolia-pagination")},get paginationList(){return document.querySelector("#algolia-pagination .ais-Pagination-list")},get stats(){return document.querySelector("#algolia-info .ais-Stats-text")}},P=t=>{v.pagination.style.display=t?"":"none",v.stats.style.display=t?"":"none"},b=(t,e,l=0)=>{var i;0===t.length&&e?(v.hitsEmpty.textContent=a.hits_empty.replace(/\$\{query}/,e),v.hitsEmpty.style.display="",v.hitsWrapper.style.display="none",v.stats.style.display="none"):(v.hitsEmpty.style.display="none",i=t.map((t,e)=>{var e=l*o+e+1,i=t.permalink||GLOBAL_CONFIG.root+t.path,a=t._highlightResult||t;let n="";try{a.contentStripTruncate?n=h(a.contentStripTruncate):a.contentStrip?n=h(a.contentStrip):a.content?n=h(a.content):t.contentStripTruncate?n=h(t.contentStripTruncate):t.contentStrip?n=h(t.contentStrip):t.content&&(n=h(t.content))}catch(t){n=""}let s="no-title";try{a.title?s=u(a.title)||"no-title":t.title&&(s=u(t.title)||"no-title"),s&&"no-title"!==s||(s="string"==typeof t.title&&t.title.trim()?t.title.trim():t.title&&"object"==typeof t.title&&t.title.value&&String(t.title.value).trim()||"no-title")}catch(t){s="no-title"}return`
        <li class="ais-Hits-item" value="${e}">
          <a href="${i}" class="algolia-hit-item-link">
            <span class="algolia-hits-item-title">${s}</span>
            ${n?`<div class="algolia-hit-item-content">${n}</div>`:""}
          </a>
        </li>`}).join(""),v.hitsList.innerHTML=i,v.hitsWrapper.style.display=e?"":"none",0<t.length&&(v.stats.style.display=""))},w=(a,t)=>{if(t<=1)v.pagination.style.display="none",v.paginationList.innerHTML="";else{v.pagination.style.display="block";var n=0===a,s=a===t-1,l=window.innerWidth<768?3:5;let e=Math.max(0,a-Math.floor(l/2));var r=Math.min(t-1,e+l-1);r-e+1<l&&(e=Math.max(0,r-l+1));let i="";l<t&&0<e&&(i+=`
        <li class="ais-Pagination-item ais-Pagination-item--page">
          <a class="ais-Pagination-link" aria-label="Page 1" href="#" data-page="0">1</a>
        </li>`,1<e)&&(i+=`
          <li class="ais-Pagination-item ais-Pagination-item--ellipsis">
            <span class="ais-Pagination-link">...</span>
          </li>`);for(let t=e;t<=r;t++){var o=t===a;i+=o?`
          <li class="ais-Pagination-item ais-Pagination-item--page ais-Pagination-item--selected">
            <span class="ais-Pagination-link" aria-label="Page ${t+1}">${t+1}</span>
          </li>`:`
          <li class="ais-Pagination-item ais-Pagination-item--page">
            <a class="ais-Pagination-link" aria-label="Page ${t+1}" href="#" data-page="${t}">${t+1}</a>
          </li>`}l<t&&r<t-1&&(r<t-2&&(i+=`
          <li class="ais-Pagination-item ais-Pagination-item--ellipsis">
            <span class="ais-Pagination-link">...</span>
          </li>`),i+=`
        <li class="ais-Pagination-item ais-Pagination-item--page">
          <a class="ais-Pagination-link" aria-label="Page ${t}" href="#" data-page="${t-1}">${t}</a>
        </li>`),1<t?(v.paginationList.innerHTML=`
            <li class="ais-Pagination-item ais-Pagination-item--previousPage ${n?"ais-Pagination-item--disabled":""}">
              ${n?'<span class="ais-Pagination-link ais-Pagination-link--disabled" aria-label="Previous Page"><i class="fas fa-angle-left"></i></span>':`<a class="ais-Pagination-link" aria-label="Previous Page" href="#" data-page="${a-1}"><i class="fas fa-angle-left"></i></a>`}
            </li>
            ${i}
            <li class="ais-Pagination-item ais-Pagination-item--nextPage ${s?"ais-Pagination-item--disabled":""}">
              ${s?'<span class="ais-Pagination-link ais-Pagination-link--disabled" aria-label="Next Page"><i class="fas fa-angle-right"></i></span>':`<a class="ais-Pagination-link" aria-label="Next Page" href="#" data-page="${a+1}"><i class="fas fa-angle-right"></i></a>`}
            </li>`,v.pagination.style.display=m?"":"none"):v.pagination.style.display="none"}},x=(t,e,i)=>{i?(i=a.hits_stats.replace(/\$\{hits}/,t).replace(/\$\{time}/,e),v.stats.innerHTML="<hr>"+i,v.stats.style.display=""):v.stats.style.display="none"},S=async(e,i=0)=>{if(e.trim()){y(!0),m=e;try{let t;if(f&&"function"==typeof f.search){var a=await f.search([{indexName:r,query:e,params:{page:i,hitsPerPage:o,highlightPreTag:"<mark>",highlightPostTag:"</mark>",attributesToHighlight:["title","content","contentStrip","contentStripTruncate"]}}]);t=a.results[0]}else{if(!f||"function"!=typeof f.initIndex)throw new Error("Algolia: No compatible search method available");var n=f.initIndex(r);t=await n.search(e,{page:i,hitsPerPage:o,highlightPreTag:"<mark>",highlightPostTag:"</mark>",attributesToHighlight:["title","content","contentStrip","contentStripTruncate"]})}b(t.hits||[],e,i);var s=t.nbHits<=o?1:t.nbPages||0,l=(w(i,s),x(t.nbHits||0,t.processingTimeMS||0,e),t.hits&&0<t.hits.length);P(l),window.pjax&&window.pjax.refresh(document.getElementById("algolia-hits"))}catch(t){console.error("Algolia search error:",t),b([],e,i),w(0,0),x(0,0,e)}finally{y(!1)}}else m="",b([],"",0),w(0,0),x(0,0,""),P(!1)},k;y(!1),v.searchInput&&v.searchInput.addEventListener("input",t=>{var e,t=t.target.value;e=t,t=300,clearTimeout(k),k=setTimeout(()=>S(e),t)}),(t=document.querySelector("#algolia-search-input .ais-SearchBox-form"))&&t.addEventListener("submit",t=>{t.preventDefault();t=v.searchInput.value;S(t)}),v.pagination.addEventListener("click",t=>{t.preventDefault();var t=t.target.closest("a[data-page]");t&&(t=parseInt(t.dataset.page,10),!isNaN(t))&&m&&S(m,t)}),P(!1),p(),n.addEventListener("click",d),document.querySelector("#algolia-search .search-close-button").addEventListener("click",d),window.addEventListener("pjax:complete",()=>{btf.isHidden(n)||d(),p()})});